<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>CityLib - Nouvel utilisateur</title>
    <div th:replace="fragments/statics.html :: head"></div>
</head>
<body class="bg-primary text-light" style="overflow: hidden;background: url('/images/background/bg_login.jpg') no-repeat fixed top;background-size: cover;background-position-y: 56px;">

<nav th:replace="fragments/statics.html :: navbar">
</nav>

<div class="container-fluid" style="height: 100vh;">
    <div class="row h-100 align-items-center">
        <div class="col-md-6 mx-auto">

            <div class="text-center mb-5">
                <img src="/images/splash_register.png" />
            </div>

            <div th:if="${param.success}">
                <div class="alert alert-info">
                    Bienvenue sur CityLib !
                </div>
            </div>

            <form th:action="@{/registration}" th:object="${user}" method="post" class="mx-auto">

                <p class="error-message"
                   th:if="${#fields.hasGlobalErrors()}"
                   th:each="error : ${#fields.errors('global')}"
                   th:text="${error}">Erreur lors de l'envoi du formulaire</p>

                <div class="form-group text-center"
                     th:classappend="${#fields.hasErrors('email')}? 'has-error':''">
                    <label for="email" class="control-label">Email (Il sera votre identifiant de connexion)</label>
                    <input id="email"
                           class="form-control mx-auto"
                           style="max-width: 300px"
                           type="email"
                           placeholder="Adresse Email"
                           th:field="*{email}"/>
                    <p class="error-message"
                       th:each="error : ${#fields.errors('email')}"
                       th:text="${error}">Email non valide</p>
                </div>
                <div class="form-group text-center"
                     th:classappend="${#fields.hasErrors('username')}? 'has-error':''">
                    <label for="username" class="control-label">Nom d'utilisateur (Il vous représentera sur le site)</label>
                    <input id="username"
                           class="form-control mx-auto"
                           style="max-width: 300px"
                           placeholder="Nom d'utilisateur"
                           th:field="*{username}"/>
                    <p class="error-message"
                       th:each="error: ${#fields.errors('username')}"
                       th:text="${error}">Nom d'utilisateur non valide</p>
                </div>
                <div class="form-group text-center"
                     th:classappend="${#fields.hasErrors('password')}? 'has-error':''">
                    <label for="password" class="control-label">Mot de passe</label>
                    <input id="password"
                           class="form-control mx-auto"
                           style="max-width: 300px"
                           type="password"
                           placeholder="Mot de passe"
                           th:field="*{password}"/>
                    <p class="error-message"
                       th:each="error : ${#fields.errors('password')}"
                       th:text="${error}">Mot de passe non valide</p>
                </div>
                <div class="form-group text-center"
                     th:classappend="${#fields.hasErrors('matchingPassword')}? 'has-error':''">
                    <input id="confirmPassword"
                           class="form-control mx-auto"
                           style="max-width: 300px"
                           type="password"
                           placeholder="Confirmation"
                           th:field="*{matchingPassword}"/>
                    <p class="error-message"
                       th:each="error : ${#fields.errors('matchingPassword')}"
                       th:text="${error}">Confirmation du mot de passe non valide</p>
                </div>
                <div class="form-group">
                    <div class="row justify-content-center">
                        <button type="submit" class="btn btn-info font-weight-bold mt-3">S'inscrire</button>
                    </div>
                </div>
                <div class="form-group text-center mt-4">
                    <span>Déjà inscrit ? <a href="/login" th:href="@{/login}" class="text-info">Connectez-vous ici !</a></span>
                </div>

            </form>
        </div>
    </div>
</div>

<div th:replace="fragments/statics.html :: scripts"></div>

</body>
</html>